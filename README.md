# Age of Empires 4 TypeScript template
Enables creating Age of Empires 4 mods in TypeScript using [TypeScriptToLua](https://typescripttolua.github.io/).

Uses type definitions from the [@aoemods/aoetypes](https://github.com/aoemods/aoetypes) npm package (types also viewable online [here](https://aoemods.github.io/aoetypes-docs/)).

Join the [AoE 4 Modding Discord server](https://discord.gg/h8FX9Uq3vG) if you experience any issues or have questions.

## Usage
Clone this repository, then run `npm install` as with any npm project.

Edit your scripts in the `scripts/` directory. Use the commands below to convert your scripts to Lua and copy them over to your mod.

- `npm run build`: Generates a single Lua script `scar/main.lua` from your TypeScript files
- `npm run dev`: Automatically builds your scripts like build whenever your scripts change, but faster because it is incremental
- `npm run deploy <out-file>`: Copies the Lua file to the project directory and does some required post-processing, `<out-file>` is eg. `C:\Users\username\Documents\projectname\assets\scar\main.scar`

## If types are broken
Since TypeScript support is still experimental you will likely experience incorrect types.
To fix them yourself, clone the [@aoemods/aoetypes](https://github.com/aoemods/aoetypes) repository, edit `packages.json` to point to it (eg. `file:../aoe-types/packages/aoetypes`) instead of the npm version and run npm install in this repository.
After that is done, you can edit `packages/aoetypes/types/aoetypes.d.ts` to adjust the types. Note however that these are autogenerated and would be overwriten if you wanted to update the aoetypes package later. 
